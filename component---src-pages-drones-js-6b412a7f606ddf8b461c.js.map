{"version":3,"sources":["webpack:///./src/pages/drones.js","webpack:///./src/components/dronesound.js"],"names":["SecondPage","CSDrone","props","state","csoundLoaded","csndstatus","rvar","seed","pathseed","wave","scale","dist","dp","dmp","itm","id","type","label","min","max","step","defval","height","itmrev","itmshi","itmens","itmfilt","log","niseed","size","nipseed","niwave","vertical","items","name","value","niscale","componentDidMount","setTimeout","global","CsoundObj","initialize","then","csound","fetch","response","arrayBuffer","buf","a","writeToFS","compileCSD","start","setState","changeValue","isPlaying","isStarted","componentWillUnmount","this","stop","destroy","handleStart","CSOUND_AUDIO_CONTEXT","resume","started","readScore","handleRandom","Util","randomIntM","console","handlePause","suspend","handleContinue","handleStop","handleUpdate","val","setControlChannel","handleNI","st","render","onClick","bind","className","noGutters","def","onChange","key","React","Component"],"mappings":"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","file":"component---src-pages-drones-js-6b412a7f606ddf8b461c.js","sourcesContent":["import React from 'react'\nimport { Link } from 'gatsby'\nimport { Row, Col } from \"react-bootstrap\";\nimport CSDrone from \"../components/dronesound\"\nimport Layout from '../components/layout'\n\nconst SecondPage = () => (\n  <Layout>\n    <Col>\n      <Row><Col><h2>Random Drones</h2></Col></Row>\n      <Row><Col><CSDrone/></Col></Row>\n    </Col>\n   </Layout>\n)\n\nexport default SecondPage\n","import React from 'react'\nimport { Button, Row, Col } from 'react-bootstrap'\nimport Fader from './Fader.js'\nimport NumberInput from './NumberInput.js'\nimport MSelect from './MSelect.js'\nimport Util from './util.js'\nclass CSDrone extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state={csoundLoaded:\"loading\",csndstatus:'dbyellow',rvar:0,seed:821917,pathseed:19320,wave:4,scale:5,dist:1,dp:0.071,dmp:0.73};\n      this.itm = { id : 'hvsamp', type : 'fader', label : 'amp', min: 0, max: 1, step: 0.01, defval: 0.6, height: 200 }\n      this.itmrev = { id : 'hvsrev', type : 'fader', label : 'reverb', min: 0, max: 1, step: 0.01, defval: 0.6, height: 200 }\n      this.itmshi = { id : 'hvsshi', type : 'fader', label : 'shi', min: 0, max: 1, step: 0.01, defval: 0.5, height: 200 }\n      this.itmens = { id : 'hvsens', type : 'fader', label : 'ens', min: 0, max: 1, step: 0.01, defval: 0.1, height: 200 }\n      this.itmfilt = { id : 'hvsfilt', type : 'fader', label : 'filter', log:true, min: 40, max: 15000, step: 0.01, defval: 5000, height: 200 }\n      this.niseed = { id : 'seed', type : 'numberinput', label : 'seed', size:\"7\", min: 0, max: 1000000, step: 1, defval: 0 }\n      this.nipseed = { id : 'pathseed', type : 'numberinput', label : 'pseed', size:\"7\", min: 0, max: 100000, step: 1, defval: 0 }\n      this.niwave = { id : 'wave', type : 'select', label : 'wave', defval: 0 , vertical:true,items:[\n                                { name:'sine',value:0},\n                                { name:'sin2',value:1},\n                                { name:'saw',value:2},\n                                { name:'pls',value:3},\n                                { name:'tri',value:4},\n                                { name:'rnd',value:5},\n                                { name:'vcosaw',value:6},\n                                { name:'vcopls',value:7},\n                                { name:'vcotri',value:8},\n                    ]}\n      this.niscale = { id : 'scale', type : 'select', label : 'scales', defval: 0, vertical:true,\n                       items: [\n                                { name:'limit',value:0},\n                                { name:'majb7',value:1},\n                                { name:'maj7-5^',value:2},\n                                { name:'minblue',value:3},\n                                { name:'minzo',value:4},\n                                { name:'phry',value:5},\n                                { name:'min-6',value:6},\n                                { name:'min',value:7},\n                                { name:'p87',value:8},\n                              ]}\n\n      this.dist = { id : 'dist', type : 'select', label : 'dist', defval: 0, vertical:true,\n                       items: [\n                                { name:'cauchy',value:0},\n                                { name:'beta',value:1},\n                                { name:'weibull',value:2},\n                              ]}\n      this.dp = { id : 'dp', type : 'fader', label : 'dens', min: 0.001, max: 0.2, step: 0.001, defval: 0.1 }\n      this.dmp = { id : 'dmp', type : 'fader', label : 'dmp', min: 0.01, max: 1, step: 0.01, defval: 0.1 }\n\n  }\n  componentDidMount() {\n    setTimeout(() => {\n      if(global.CsoundObj) {\n      global.CsoundObj.initialize().then(() => {\n      this.csound = new global.CsoundObj();\n  //use this code to load a .csd file and have Csound compile and start it\n      fetch('/drones.csd').then((response) => {\n        response.arrayBuffer().then(async (buf) => {\n        this.csound.writeToFS('drones.csd', buf);\n        this.csound.compileCSD('drones.csd');\n        this.csound.start();\n        this.setState({csoundLoaded:\"running\"});\n        this.setState({csndstatus:\"dbgreen\"});\n        this.niseed.changeValue(821917);\n        this.nipseed.changeValue(19320);\n        this.niwave.changeValue(4)\n        this.niscale.changeValue(5);\n        this.dmp.changeValue(0.73);\n        this.dist.changeValue(1);\n        this.dp.changeValue(0.071);\n\t      this.isPlaying = false;\n\t      this.isStarted = false;\n        })\n      })\n      });\n      } else {\n        this.setState({csoundLoaded:\"Loading failed (try to reload the page)\"});\n        this.setState({csndstatus:\"dbred\"});\n      }\n    },2000);\n   }\n\n  componentWillUnmount() {\n     if(this.csound) {\n        this.csound.stop();\n        this.csound.destroy();\n     }\n  }\n\n  handleStart() {\n     if(!this.isPlaying) {\n       if(!this.isStarted) {\n          global.CsoundObj.CSOUND_AUDIO_CONTEXT.resume();\n          this.started = true;\n       }\n       this.csound.readScore(`i \"hvs\" 0.00067 3000 110 4 ${this.state.pathseed/100000} ${this.state.seed*2147.4836} ${this.state.wave} ${this.state.scale} ${this.state.rvar} ${this.state.dist} ${this.state.dp} ${this.state.dmp}`);\n       this.isPlaying = true;\n     }\n  }\n  handleRandom() {\n       let seed = Util.randomIntM(1000000);\n       this.niseed.changeValue(seed);\n       let pathseed = Util.randomIntM(100000);\n       this.nipseed.changeValue(pathseed);\n       let wave = Util.randomIntM(9);\n       this.niwave.changeValue(wave)\n       let scale = Util.randomIntM(9);\n       this.niscale.changeValue(scale);\n       console.log(seed,pathseed,wave,scale);\n  }\n  handlePause() {\n     if(this.started) {\n       this.started = false;\n       global.CsoundObj.CSOUND_AUDIO_CONTEXT.suspend();\n     }\n  }\n\n  handleContinue() {\n     if(!this.started) {\n       this.started = true;\n       global.CsoundObj.CSOUND_AUDIO_CONTEXT.resume();\n     }\n  }\n\n  handleStop() {\n     if(this.isPlaying) {\n       this.csound.readScore('i \"trigOff\" 0 0.1');\n       this.isPlaying = false;\n     }\n  }\n\n  handleUpdate(id,val) {\n    this.csound && this.csound.setControlChannel(id,val);\n  }\n\n  handleNI(id,value) {\n    let st = {};\n    st[id]=value;\n    this.setState(st);\n  }\n\n  render() {\n     const {\n       state: { seed,pathseed,wave,scale,csoundLoaded },\n     } = this\n \n    return (\n      <>\n      <Row>\n\t      <Col><Button onClick={this.handleStart.bind(this)}>Start</Button></Col>\n\t      <Col><Button onClick={this.handleStop.bind(this)}>Stop</Button></Col>\n\t      <Col><Button onClick={this.handleRandom.bind(this)}>Random</Button></Col>\n\t      <Col><Button onClick={this.handlePause.bind(this)}>Pause</Button></Col>\n\t      <Col><Button onClick={this.handleContinue.bind(this)}>Continue</Button></Col>\n      </Row>\n      <Row><Col className={this.state.csndstatus}>Csound {csoundLoaded}</Col></Row>\n      <Row><Col>stop and start after changing these parameters.</Col></Row>\n      <Row noGutters=\"true\">\n        <Col>\n          <Row><Col><NumberInput vertical={false} def={this.niseed} onChange={this.handleNI.bind(this)}/></Col></Row>\n          <Row><Col><NumberInput vertical={false} def={this.nipseed} onChange={this.handleNI.bind(this)}/></Col></Row>\n          <Row>\n            <Col><MSelect vertical={true} def={this.dist} onChange={this.handleNI.bind(this)}/></Col>\n          </Row>\n        </Col>\n        <Fader def={this.dp} key={this.dp.id} onChange={this.handleNI.bind(this)}/>\n        <Col><MSelect vertical={true} def={this.niwave} onChange={this.handleNI.bind(this)}/></Col>\n        <Col><MSelect def={this.niscale} onChange={this.handleNI.bind(this)} vertical={true}/></Col>\n        <Fader def={this.dmp} key={this.dmp.id} onChange={this.handleNI.bind(this)}/>\n      </Row>\n      <Row><Col>performance parameters</Col></Row>\n      <Row noGutters=\"true\">\n        <Fader def={this.itm} key={this.itm.id} onChange={this.handleUpdate.bind(this)}/>\n        <Fader def={this.itmrev} key={this.itmrev.id} onChange={this.handleUpdate.bind(this)}/>\n        <Fader def={this.itmshi} key={this.itmshi.id} onChange={this.handleUpdate.bind(this)}/>\n        <Fader def={this.itmens} key={this.itmens.id} onChange={this.handleUpdate.bind(this)}/>\n        <Fader def={this.itmfilt} key={this.itmfilt.id} onChange={this.handleUpdate.bind(this)}/>\n      </Row>\n      </>\n    );\n\n  }\n}\n\nexport default CSDrone\n"],"sourceRoot":""}